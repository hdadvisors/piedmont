<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.280">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jonathan Knopf (jonathan@hdadvisors.net)">

<title>Piedmont Housing Alliance Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="piedmont_files/libs/clipboard/clipboard.min.js"></script>
<script src="piedmont_files/libs/quarto-html/quarto.js"></script>
<script src="piedmont_files/libs/quarto-html/popper.min.js"></script>
<script src="piedmont_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="piedmont_files/libs/quarto-html/anchor.min.js"></script>
<link href="piedmont_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="piedmont_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="piedmont_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="piedmont_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="piedmont_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

<script src="piedmont_files/libs/core-js-2.5.3/shim.min.js"></script>
<script src="piedmont_files/libs/react-17.0.0/react.min.js"></script>
<script src="piedmont_files/libs/react-17.0.0/react-dom.min.js"></script>
<script src="piedmont_files/libs/reactwidget-1.0.0/react-tools.js"></script>
<script src="piedmont_files/libs/htmlwidgets-1.6.1/htmlwidgets.js"></script>
<link href="piedmont_files/libs/reactable-0.4.3/reactable.css" rel="stylesheet">
<script src="piedmont_files/libs/reactable-binding-0.4.3/reactable.js"></script>
<script src="piedmont_files/libs/kePrint-0.0.1/kePrint.js"></script>
<link href="piedmont_files/libs/lightable-0.0.1/lightable.css" rel="stylesheet">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article toc-left">
<div id="quarto-sidebar-toc-left" class="sidebar toc-left">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#about" id="toc-about" class="nav-link active" data-scroll-target="#about"><span class="toc-section-number">1</span>  About</a>
  <ul class="collapse">
  <li><a href="#goals" id="toc-goals" class="nav-link" data-scroll-target="#goals"><span class="toc-section-number">1.1</span>  Goals</a></li>
  <li><a href="#guiding-questions" id="toc-guiding-questions" class="nav-link" data-scroll-target="#guiding-questions"><span class="toc-section-number">1.2</span>  Guiding questions</a></li>
  </ul></li>
  <li><a href="#data-assembly" id="toc-data-assembly" class="nav-link" data-scroll-target="#data-assembly"><span class="toc-section-number">2</span>  Data assembly</a>
  <ul class="collapse">
  <li><a href="#program-and-client-data" id="toc-program-and-client-data" class="nav-link" data-scroll-target="#program-and-client-data"><span class="toc-section-number">2.1</span>  Program and client data</a></li>
  <li><a href="#regional-and-neighborhood-profiles" id="toc-regional-and-neighborhood-profiles" class="nav-link" data-scroll-target="#regional-and-neighborhood-profiles"><span class="toc-section-number">2.2</span>  Regional and neighborhood profiles</a></li>
  <li><a href="#mortgage-applications-and-activity" id="toc-mortgage-applications-and-activity" class="nav-link" data-scroll-target="#mortgage-applications-and-activity"><span class="toc-section-number">2.3</span>  Mortgage applications and activity</a></li>
  <li><a href="#home-values" id="toc-home-values" class="nav-link" data-scroll-target="#home-values"><span class="toc-section-number">2.4</span>  Home values</a>
  <ul class="collapse">
  <li><a href="#real-estate-assessments" id="toc-real-estate-assessments" class="nav-link" data-scroll-target="#real-estate-assessments"><span class="toc-section-number">2.4.1</span>  Real estate assessments</a></li>
  <li><a href="#mls-sales" id="toc-mls-sales" class="nav-link" data-scroll-target="#mls-sales"><span class="toc-section-number">2.4.2</span>  MLS sales</a></li>
  </ul></li>
  <li><a href="#other-data" id="toc-other-data" class="nav-link" data-scroll-target="#other-data"><span class="toc-section-number">2.5</span>  Other data</a></li>
  </ul></li>
  <li><a href="#analysis" id="toc-analysis" class="nav-link" data-scroll-target="#analysis"><span class="toc-section-number">3</span>  Analysis</a>
  <ul class="collapse">
  <li><a href="#clients-served-by-program" id="toc-clients-served-by-program" class="nav-link" data-scroll-target="#clients-served-by-program"><span class="toc-section-number">3.1</span>  Clients served by program</a></li>
  <li><a href="#profile-of-clients" id="toc-profile-of-clients" class="nav-link" data-scroll-target="#profile-of-clients"><span class="toc-section-number">3.2</span>  Profile of clients</a></li>
  <li><a href="#assistance-levels" id="toc-assistance-levels" class="nav-link" data-scroll-target="#assistance-levels"><span class="toc-section-number">3.3</span>  Assistance levels</a></li>
  <li><a href="#spatial-patterns" id="toc-spatial-patterns" class="nav-link" data-scroll-target="#spatial-patterns"><span class="toc-section-number">3.4</span>  Spatial patterns</a></li>
  <li><a href="#housing-outcomes" id="toc-housing-outcomes" class="nav-link" data-scroll-target="#housing-outcomes"><span class="toc-section-number">3.5</span>  Housing outcomes</a></li>
  <li><a href="#home-equity" id="toc-home-equity" class="nav-link" data-scroll-target="#home-equity"><span class="toc-section-number">3.6</span>  Home equity</a></li>
  </ul></li>
  <li><a href="#takeaways" id="toc-takeaways" class="nav-link" data-scroll-target="#takeaways"><span class="toc-section-number">4</span>  Takeaways</a></li>
  <li><a href="#next-steps" id="toc-next-steps" class="nav-link" data-scroll-target="#next-steps"><span class="toc-section-number">5</span>  Next steps</a></li>
  </ul>
</nav>
</div>
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Piedmont Housing Alliance Data Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Jonathan Knopf (jonathan@hdadvisors.net) </p>
          </div>
  </div>
    
  
    
  </div>
  

</header>

<div class="cell">
<details>
<summary>Setup code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data management and analysis tools</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Load data visualization tools</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(hdatools)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggiraph)</span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggtext)</span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(reactable)</span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a>today <span class="ot">&lt;-</span> <span class="fu">Sys.Date</span>()</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a><span class="fu">setwd</span>(<span class="st">"~/repos/piedmont"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Please note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This document is still under construction. It was last updated January 10, 2023 at 01:08 AM.</p>
</div>
</div>
<section id="about" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> About</h1>
<p>Piedmont Housing Alliance (PHA) is a 501(c)3 nonprofit organization that provides housing services to clients in the Charlottesville, Virginia region. In 2022, PHA received a Tier III Capacity Building Program Enhancement Grant from Virginia Housing to evaluate and improve their programs aimed at helping first-time homebuyers.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
How PHA helps first-time homebuyers
</div>
</div>
<div class="callout-body-container callout-body">
<p>PHA offers two programs to help buyers earning less than 80% of Area Median Income (AMI) purchase their first home.</p>
<ol type="1">
<li><p>The <strong>Down Payment Loan</strong> (DPL) program combines funding from several different sources to provide buyers with additional assistance to increase their total down payment and cover closing costs. This allows buyer to more easily afford homes at prices they would otherwise be unable to afford.</p></li>
<li><p>PHA administers the <strong>Sponsoring Partnerships &amp; Revitalizing Communities</strong> (SPARC) program, which lowers a buyer’s mortgage interest rate by 1.00%. SPARC funds are allocated by Virginia Housing and help buyers save thousands of dollars over the life of their loan.</p></li>
</ol>
</div>
</div>
<p>PHA seeks a deeper understanding of these two programs’ outcomes and impacts, particularly in terms of racial equity and wealth-building. This document was prepared by HDAdvisors to develop methods for evaluating the program using internal and external data.</p>
<section id="goals" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="goals"><span class="header-section-number">1.1</span> Goals</h2>
<p>The primary goal of this analysis is a preliminary evaluation of the DPL and SPARC programs’ current abilities to support buyers who are more likely to be at a systemic disadvantage because of unjust lending practices and other discriminatory efforts.</p>
<p>The secondary goal is to provide PHA staff with reproducible methods for collecting, preparing, and analyzing the data necessary for this evaluation. This will allow PHA to regularly track and monitor these programs without outside assistance.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Why this matters
</div>
</div>
<div class="callout-body-container callout-body">
<p>This analysis will be helpful for PHA in three important ways:</p>
<ol type="1">
<li>To proactively assess whether the program fulfills all applicable fair housing requirements,</li>
<li>To provide staff with a thorough understanding of program outcomes for stronger grant applications, and</li>
<li>To further PHA’s existing Diversity, Equity, and Inclusion (DEI) efforts.</li>
</ol>
</div>
</div>
</section>
<section id="guiding-questions" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="guiding-questions"><span class="header-section-number">1.2</span> Guiding questions</h2>
<p>The following questions help determine (1) what kind of data is needed, and (2) how that data should be analyzed.</p>
<ul>
<li>How do PHA’s clients vary by race, ethnicity, and income compared to the region as a whole?</li>
<li>Do the levels of assistance vary significantly by race, ethnicity, and income?</li>
<li>Are there noticeable migration patterns for clients purchasing their first home?</li>
<li>How do the homes purchased by clients compare to similar homes in that neighborhood?</li>
<li>How much home equity have past clients gained? How similar are these gains across race, ethnicity, and neighborhoods?</li>
</ul>
</section>
</section>
<section id="data-assembly" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Data assembly</h1>
<p>This section outlines each metric necessary for analysis, along with methods for collecting and cleaning the appropriate data.</p>
<section id="program-and-client-data" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="program-and-client-data"><span class="header-section-number">2.1</span> Program and client data</h2>
<p>PHA provided data on DPL and SPARC clients from FY 2018 through FY 2023.</p>
<p>This data includes attributes about each client household, including:</p>
<ul>
<li>Total annual income</li>
<li>Area median income (AMI)</li>
<li>Race and ethnicity (optional)</li>
<li>Number of persons</li>
<li>Street address (at time of application)</li>
</ul>
<p>It also includes DPL-specific program data, including:</p>
<ul>
<li>Number of loans provided</li>
<li>Total amount of DPL assistance</li>
<li>Funding sources used for each loan</li>
<li>Source(s) and amount of non-DPL assistance</li>
</ul>
<p>Information on the homes purchased by clients include:</p>
<ul>
<li>Street address</li>
<li>Sales price</li>
<li>Appraised value</li>
<li>Closing costs and other prepaids</li>
</ul>
<p>Information about clients’ mortgages are also provided:</p>
<ul>
<li>Lending institution</li>
<li>Mortgage product</li>
<li>Mortgage amount</li>
<li>Interest rate</li>
<li>Original interest rate (SPARC only)</li>
<li>Closing date</li>
</ul>
<p>The full dataset includes multiple other fields that are not necessary or relevant to this analysis.</p>
<p><strong>Step 1: Import data</strong></p>
<div class="cell">
<details>
<summary>Client data import</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Import list of DPL clients and clean column names</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>clients_dpl_raw <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/raw/clients.xlsx"</span>,</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>                             <span class="at">sheet =</span> <span class="st">"Down Payment Loan"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Import list of SPARC clients and clean column names</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>clients_sparc_raw <span class="ot">&lt;-</span> <span class="fu">read_xlsx</span>(<span class="st">"data/raw/clients.xlsx"</span>,</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>                             <span class="at">sheet =</span> <span class="st">"SPARC"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">clean_names</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Step 2: Clean up and fix data</strong></p>
<div class="cell">
<details>
<summary>DPL client data prep</summary>
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up DPL data</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>clients_dpl <span class="ot">&lt;-</span> clients_dpl_raw <span class="sc">|&gt;</span> </span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop rows that do not have client records</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(contract_date) <span class="sc">|&gt;</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove columns with personal information or unnecessary data</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(fha_case_number, ami_approval_date, client_intake_date,</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>            client_last_name, client_first_name, counselor,</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a>            service_type, client_employer, employer_msa,</span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a>            property_msa, status, loan_officer, client_msa,</span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a>            client_email_address, phone_number</span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a>            )) <span class="sc">|&gt;</span> </span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename certain columns to more helpful descriptions</span></span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">mortgage_product =</span> x1st_mortgage_product,</span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a>         <span class="at">mortgage_amount =</span> x1st_mortgage_amount,</span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a>         <span class="at">pha_loans_n =</span> number_of_pha_loans,</span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a>         <span class="at">pha_loans_amount =</span> of_pha_loans,</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a>         <span class="at">pha_loan_source =</span> source_of_pha_loan</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new unique DPL client ID column</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_dpl =</span> <span class="fu">str_c</span>(<span class="st">"DPL"</span>, <span class="fu">str_pad</span>(<span class="fu">row_number</span>(), <span class="dv">3</span>, <span class="at">pad =</span> <span class="st">"0"</span>)),</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up original client_number column</span></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">client_number =</span> <span class="fu">str_remove_all</span>(client_number, <span class="st">"</span><span class="sc">\\</span><span class="st">.0"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Change "Unknown" values to NA in appraised_value</span></span>
<span id="cb3-37"><a href="#cb3-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-38"><a href="#cb3-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">appraised_value =</span> <span class="fu">as.numeric</span>(<span class="fu">na_if</span>(appraised_value, <span class="st">"Unknown"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb3-39"><a href="#cb3-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-40"><a href="#cb3-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up lending_institution names</span></span>
<span id="cb3-41"><a href="#cb3-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-42"><a href="#cb3-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lending_institution =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-43"><a href="#cb3-43" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"Coast"</span>) <span class="sc">~</span> <span class="st">"Atlantic Coast Mortgage"</span>,</span>
<span id="cb3-44"><a href="#cb3-44" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"Fulton"</span>) <span class="sc">~</span> <span class="st">"Fulton Mortgage"</span>,</span>
<span id="cb3-45"><a href="#cb3-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"Charlottesville"</span>) <span class="sc">~</span> <span class="st">"Habitat for Humanity of Greater Charlottesville"</span>,</span>
<span id="cb3-46"><a href="#cb3-46" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="fu">regex</span>(<span class="st">"first"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"Towne First Mortgage"</span>,</span>
<span id="cb3-47"><a href="#cb3-47" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"USDA"</span>) <span class="sc">~</span> <span class="st">"USDA"</span>,</span>
<span id="cb3-48"><a href="#cb3-48" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"Waterstone"</span>) <span class="sc">~</span> <span class="st">"Waterstone Mortgage Corporation"</span>,</span>
<span id="cb3-49"><a href="#cb3-49" aria-hidden="true" tabindex="-1"></a>    lending_institution <span class="sc">==</span> <span class="st">"Towne Bank Mortgage"</span> <span class="sc">~</span> <span class="st">"TowneBank Mortgage"</span>,</span>
<span id="cb3-50"><a href="#cb3-50" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> lending_institution</span>
<span id="cb3-51"><a href="#cb3-51" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb3-52"><a href="#cb3-52" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-53"><a href="#cb3-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up mortgage_product names</span></span>
<span id="cb3-54"><a href="#cb3-54" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-55"><a href="#cb3-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mortgage_product =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-56"><a href="#cb3-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="st">"502|USDA|RHS"</span>) <span class="sc">~</span> <span class="st">"502 Direct Loan"</span>,</span>
<span id="cb3-57"><a href="#cb3-57" aria-hidden="true" tabindex="-1"></a>    mortgage_product <span class="sc">==</span> <span class="st">"Coventional"</span> <span class="sc">~</span> <span class="st">"Conventional"</span>,</span>
<span id="cb3-58"><a href="#cb3-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="st">"VHDA FHA|VHDA - HFA"</span>) <span class="sc">~</span> <span class="st">"VHDA - FHA"</span>,</span>
<span id="cb3-59"><a href="#cb3-59" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> mortgage_product</span>
<span id="cb3-60"><a href="#cb3-60" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb3-61"><a href="#cb3-61" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-62"><a href="#cb3-62" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Change '$-' values in other_assistance_amount to NA</span></span>
<span id="cb3-63"><a href="#cb3-63" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-64"><a href="#cb3-64" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">other_assistance_amount =</span> <span class="fu">as.numeric</span>(<span class="fu">na_if</span>(other_assistance_amount, <span class="st">"$-"</span>))) <span class="sc">|&gt;</span> </span>
<span id="cb3-65"><a href="#cb3-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-66"><a href="#cb3-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create column for single or multiple race; clean up race names</span></span>
<span id="cb3-67"><a href="#cb3-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-68"><a href="#cb3-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">multirace =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-69"><a href="#cb3-69" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(race, <span class="st">"Multi"</span>) <span class="sc">~</span> <span class="st">"Multiple"</span>,</span>
<span id="cb3-70"><a href="#cb3-70" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Single"</span>),</span>
<span id="cb3-71"><a href="#cb3-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">.before =</span> race) <span class="sc">|&gt;</span> </span>
<span id="cb3-72"><a href="#cb3-72" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-73"><a href="#cb3-73" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-74"><a href="#cb3-74" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(race, <span class="st">"and White"</span>) <span class="sc">~</span> <span class="st">"Black and White"</span>,</span>
<span id="cb3-75"><a href="#cb3-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(race, <span class="st">"Other"</span>) <span class="sc">~</span> <span class="st">"Other races"</span>,</span>
<span id="cb3-76"><a href="#cb3-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(race, <span class="st">"Asian"</span>) <span class="sc">~</span> <span class="st">"Asian"</span>,</span>
<span id="cb3-77"><a href="#cb3-77" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(race, <span class="st">"Single Race - Black"</span>) <span class="sc">~</span> <span class="st">"Black"</span>,</span>
<span id="cb3-78"><a href="#cb3-78" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"White"</span></span>
<span id="cb3-79"><a href="#cb3-79" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb3-80"><a href="#cb3-80" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-81"><a href="#cb3-81" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Simplify rural_area_status and english_proficiency columns</span></span>
<span id="cb3-82"><a href="#cb3-82" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-83"><a href="#cb3-83" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">rural_area_status =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-84"><a href="#cb3-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(rural_area_status, <span class="st">"lives"</span>) <span class="sc">~</span> <span class="st">"Rural"</span>,</span>
<span id="cb3-85"><a href="#cb3-85" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Not rural"</span></span>
<span id="cb3-86"><a href="#cb3-86" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb3-87"><a href="#cb3-87" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb3-88"><a href="#cb3-88" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">english_proficiency =</span> <span class="fu">case_when</span>(</span>
<span id="cb3-89"><a href="#cb3-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(english_proficiency, <span class="st">"is not"</span>) <span class="sc">~</span> <span class="st">"Not proficient"</span>,</span>
<span id="cb3-90"><a href="#cb3-90" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Proficient"</span></span>
<span id="cb3-91"><a href="#cb3-91" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>SPARC client data prep</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Clean up SPARC data</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>clients_sparc <span class="ot">&lt;-</span> clients_sparc_raw <span class="sc">|&gt;</span> </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Remove columns with personal information or unnecessary data</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">!</span><span class="fu">c</span>(last_name, first_name, client,</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>            lenders_name, x20)) <span class="sc">|&gt;</span> </span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename certain columns to match DPL data</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">sale_price =</span> sales_price,</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>         <span class="at">mortgage_amount =</span> base_loan_amount,</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a>         <span class="at">household_annual_income =</span> borrower_s_income,</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">household_size =</span> number_in_hh,</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">locality =</span> msa,</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">mortgage_product =</span> loan_product,</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>         <span class="at">lending_institution =</span> lending_company</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Change client_number column to string</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">client_number =</span> <span class="fu">as.character</span>(client_number)) <span class="sc">|&gt;</span> </span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create new unique SPARC client ID column</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_sparc =</span> <span class="fu">str_c</span>(<span class="st">"SPC"</span>, <span class="fu">str_pad</span>(<span class="fu">row_number</span>(), <span class="dv">3</span>, <span class="at">pad =</span> <span class="st">"0"</span>)),</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Fix interest_rate values</span></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">interest_rate =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a>    interest_rate <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">~</span> interest_rate<span class="sc">/</span><span class="dv">100</span>,</span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> interest_rate</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create mortgage_notes column for specific loan info</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mortgage_notes =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="st">"No MI"</span>) <span class="sc">~</span> <span class="st">"No mortgage insurance"</span>,</span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="st">"Reduced"</span>) <span class="sc">~</span> <span class="st">"Reduced mortgage insurance"</span>,</span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="st">"Second Plus"</span>) <span class="sc">~</span> <span class="st">"Second Plus"</span>,</span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span>),</span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">.after =</span> mortgage_product</span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up mortgage_product names to match DPL data</span></span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">mortgage_product =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="fu">regex</span>(<span class="st">"Conventional"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"Conventional"</span>,</span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="fu">regex</span>(<span class="st">"RHS"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"502 Direct Loan"</span>,</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(mortgage_product, <span class="fu">regex</span>(<span class="st">"FHA"</span>, <span class="at">ignore_case =</span> T)) <span class="sc">~</span> <span class="st">"FHA"</span>,</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(mortgage_product) <span class="sc">~</span> <span class="st">"Unknown"</span>,</span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> mortgage_product</span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up lending_institution names to match DPL data</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lending_institution =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"C&amp;F"</span>) <span class="sc">~</span> <span class="st">"C&amp;F Mortgage Corporation"</span>,</span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(lending_institution, <span class="st">"Waterstone"</span>) <span class="sc">~</span> <span class="st">"Waterstone Mortgage Corporation"</span>,</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">is.na</span>(lending_institution) <span class="sc">~</span> <span class="st">"Unknown"</span>,</span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> lending_institution</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Clean up yes/no columns</span></span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">received_cd =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(received_cd, <span class="st">"YES|Yes|yes"</span>) <span class="sc">~</span> <span class="st">"Yes"</span>,</span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>    received_cd <span class="sc">==</span> <span class="st">"no"</span> <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>    received_cd <span class="sc">==</span> <span class="st">"N/A"</span> <span class="sc">~</span> <span class="cn">NA_character_</span>,</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="cn">NA_character_</span></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">in_ors =</span> <span class="fu">case_when</span>(</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_detect</span>(in_ors, <span class="st">"No -"</span>) <span class="sc">~</span> <span class="st">"No"</span>,</span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> in_ors</span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>  ))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Step 3: Join DPL and SPARC client data</strong></p>
<p>Some clients use both the DPL and SPARC programs to purchase their home. For now, these clients were identified by manually cross-referencing names and other fields. To join the data, the DPL <code>client_number</code> values were assigned to the respective client records in the SPARC data.</p>
<p>In the future, PHA should maintain a single client dataset that can differentiate between DPL-only, SPARC-only, and “double-dipping” clients. Specific recommendations will be detailed at the end of this document.</p>
<div class="cell">
<details>
<summary>Client data join</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Create full join using client_number</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a>clients_all <span class="ot">&lt;-</span> clients_dpl <span class="sc">|&gt;</span> </span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">full_join</span>(clients_sparc, <span class="at">by =</span> <span class="st">"client_number"</span>, <span class="at">na_matches =</span> <span class="st">"never"</span>,</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">suffix =</span> <span class="fu">c</span>(<span class="st">"_dpl"</span>, <span class="st">"_spc"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Reorder columns to place duplicate fields together</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">2</span>, <span class="dv">1</span>, <span class="dv">46</span>, <span class="dv">3</span>, <span class="dv">4</span>, <span class="dv">47</span>, <span class="dv">5</span>, <span class="dv">52</span>, <span class="dv">6</span>, <span class="dv">7</span>, <span class="dv">53</span>, <span class="dv">8</span>, <span class="dv">9</span>,</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>         <span class="dv">10</span>, <span class="dv">11</span>, <span class="dv">12</span>, <span class="dv">13</span>, <span class="dv">14</span>, <span class="dv">50</span>, <span class="dv">15</span>, <span class="dv">16</span>, <span class="dv">17</span>, <span class="dv">59</span>, <span class="dv">18</span>,</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a>         <span class="dv">55</span>, <span class="dv">19</span>, <span class="dv">51</span>, <span class="dv">20</span>, <span class="dv">49</span>, <span class="dv">48</span>, <span class="dv">50</span>, <span class="dv">21</span>, <span class="dv">22</span>, <span class="dv">23</span>, <span class="dv">24</span>,</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a>         <span class="dv">25</span>, <span class="dv">26</span>, <span class="dv">27</span>, <span class="dv">28</span>, <span class="dv">29</span>, <span class="dv">30</span>, <span class="dv">31</span>, <span class="dv">32</span>, <span class="dv">33</span>, <span class="dv">34</span>, <span class="dv">35</span>,</span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a>         <span class="dv">36</span>, <span class="dv">37</span>, <span class="dv">38</span>, <span class="dv">39</span>, <span class="dv">40</span>, <span class="dv">41</span>, <span class="dv">42</span>, <span class="dv">43</span>, <span class="dv">44</span>, <span class="dv">45</span>, <span class="dv">54</span>,</span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a>         <span class="dv">56</span>, <span class="dv">57</span>, <span class="dv">60</span>, <span class="dv">61</span></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a>         ) <span class="sc">|&gt;</span> </span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create column to show whether client uses one or both programs</span></span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">program =</span> <span class="fu">case_when</span>(</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(id_dpl) <span class="sc">&amp;</span> <span class="sc">!</span><span class="fu">is.na</span>(id_sparc) <span class="sc">~</span> <span class="st">"Both"</span>,</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a>      <span class="sc">!</span><span class="fu">is.na</span>(id_dpl) <span class="sc">&amp;</span> <span class="fu">is.na</span>(id_sparc) <span class="sc">~</span> <span class="st">"DPL"</span>,</span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"SPARC"</span>),</span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Create universal client ID column</span></span>
<span id="cb5-26"><a href="#cb5-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb5-27"><a href="#cb5-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id_pha =</span> <span class="fu">str_c</span>(<span class="st">"PHA"</span>, <span class="fu">str_pad</span>(<span class="fu">row_number</span>(), <span class="dv">3</span>, <span class="at">pad =</span> <span class="st">"0"</span>)),</span>
<span id="cb5-28"><a href="#cb5-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Step 4: View data</strong></p>
<p>Cleaned and joined client data are shown in the table below.</p>
<div class="cell">
<details>
<summary>Generate table</summary>
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">reactable</span>(clients_all,</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>          <span class="at">defaultPageSize =</span> <span class="dv">5</span>,</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>          <span class="at">defaultColDef =</span> <span class="fu">colDef</span>(<span class="at">minWidth =</span> <span class="dv">150</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">compact =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>          <span class="at">striped =</span> <span class="cn">TRUE</span>,</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>          <span class="at">wrap =</span> <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<div class="reactable html-widget html-fill-item-overflow-hidden html-fill-item" id="htmlwidget-9a9e2715036fa91cede7" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-9a9e2715036fa91cede7">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"id_pha":["PHA001","PHA002","PHA003","PHA004","PHA005","PHA006","PHA007","PHA008","PHA009","PHA010","PHA011","PHA012","PHA013","PHA014","PHA015","PHA016","PHA017","PHA018","PHA019","PHA020","PHA021","PHA022","PHA023","PHA024","PHA025","PHA026","PHA027","PHA028","PHA029","PHA030","PHA031","PHA032","PHA033","PHA034","PHA035","PHA036","PHA037","PHA038","PHA039","PHA040","PHA041","PHA042","PHA043","PHA044","PHA045","PHA046","PHA047","PHA048","PHA049","PHA050","PHA051","PHA052","PHA053","PHA054","PHA055","PHA056","PHA057","PHA058","PHA059","PHA060","PHA061","PHA062","PHA063","PHA064","PHA065","PHA066","PHA067","PHA068","PHA069","PHA070","PHA071","PHA072","PHA073","PHA074","PHA075","PHA076","PHA077","PHA078","PHA079","PHA080","PHA081","PHA082","PHA083","PHA084","PHA085","PHA086","PHA087","PHA088","PHA089","PHA090","PHA091","PHA092","PHA093","PHA094","PHA095","PHA096","PHA097","PHA098","PHA099","PHA100","PHA101","PHA102","PHA103","PHA104","PHA105","PHA106","PHA107","PHA108","PHA109","PHA110","PHA111","PHA112","PHA113","PHA114","PHA115","PHA116","PHA117","PHA118","PHA119","PHA120","PHA121","PHA122","PHA123","PHA124","PHA125","PHA126","PHA127","PHA128","PHA129","PHA130","PHA131"],"program":["Both","DPL","DPL","Both","DPL","DPL","Both","Both","Both","Both","DPL","Both","Both","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","DPL","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC","SPARC"],"client_number":["4305081","4658207","4650788","4721465","4762987","4678353","4174728","4818114","4521883","3110090","4537406","4344979","4563447","4545129","4492259","4597563","4156078","4137443","4429823","4198590","4467690","4166861","4419275","4284472","4467690","3998379","4267141","Habitat","3875759","Habitat","4023880","4051871",null,null,"4132721","3900509","4002970","3401712","3446690","3582550","3672178","3798316","2251384","3818559",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"id_dpl":["DPL001","DPL002","DPL003","DPL004","DPL005","DPL006","DPL007","DPL008","DPL009","DPL010","DPL011","DPL012","DPL013","DPL014","DPL015","DPL016","DPL017","DPL018","DPL019","DPL020","DPL021","DPL022","DPL023","DPL024","DPL025","DPL026","DPL027","DPL028","DPL029","DPL030","DPL031","DPL032","DPL033","DPL034","DPL035","DPL036","DPL037","DPL038","DPL039","DPL040","DPL041","DPL042","DPL043","DPL044",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"id_sparc":["SPC002",null,null,"SPC022",null,null,"SPC005","SPC007","SPC023","SPC012",null,"SPC076","SPC074",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"SPC001","SPC003","SPC004","SPC006","SPC008","SPC009","SPC010","SPC011","SPC013","SPC014","SPC015","SPC016","SPC017","SPC018","SPC019","SPC020","SPC021","SPC024","SPC025","SPC026","SPC027","SPC028","SPC029","SPC030","SPC031","SPC032","SPC033","SPC034","SPC035","SPC036","SPC037","SPC038","SPC039","SPC040","SPC041","SPC042","SPC043","SPC044","SPC045","SPC046","SPC047","SPC048","SPC049","SPC050","SPC051","SPC052","SPC053","SPC054","SPC055","SPC056","SPC057","SPC058","SPC059","SPC060","SPC061","SPC062","SPC063","SPC064","SPC065","SPC066","SPC067","SPC068","SPC069","SPC070","SPC071","SPC072","SPC073","SPC075","SPC077","SPC078","SPC079","SPC080","SPC081","SPC082","SPC083","SPC084","SPC085","SPC086","SPC087","SPC088","SPC089","SPC090","SPC091","SPC092","SPC093","SPC094","SPC095"],"contract_date":["2022-05-24T00:00:00Z","2022-06-25T00:00:00Z","2021-07-21T00:00:00Z","2021-06-28T00:00:00Z","2021-06-05T00:00:00Z","2021-07-04T00:00:00Z","2021-08-31T00:00:00Z","2021-10-12T00:00:00Z","2020-10-29T00:00:00Z","2021-12-17T00:00:00Z","2020-06-01T00:00:00Z","2020-06-29T00:00:00Z","2020-08-18T00:00:00Z","2020-07-01T00:00:00Z","2020-10-07T00:00:00Z","2020-06-09T00:00:00Z","2019-12-16T00:00:00Z","2019-11-13T00:00:00Z","2019-12-02T00:00:00Z","2019-11-06T00:00:00Z","2019-07-26T00:00:00Z","2019-07-26T00:00:00Z","2019-12-05T00:00:00Z","2019-07-23T00:00:00Z","2020-01-31T00:00:00Z","2020-03-27T00:00:00Z","2020-04-22T00:00:00Z","2018-04-30T00:00:00Z","2018-06-27T00:00:00Z","2018-07-11T00:00:00Z","2018-09-27T00:00:00Z","2018-11-28T00:00:00Z","2018-12-21T00:00:00Z","2019-03-18T00:00:00Z","2019-03-27T00:00:00Z","2019-03-20T00:00:00Z","2019-05-15T00:00:00Z","2017-04-04T00:00:00Z","2017-06-29T00:00:00Z","2017-05-09T00:00:00Z","2018-07-11T00:00:00Z","2017-11-04T00:00:00Z","2018-02-22T00:00:00Z","2018-03-05T00:00:00Z",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"close_date_dpl":["2022-07-26T00:00:00Z","2022-08-02T00:00:00Z","2021-08-21T00:00:00Z","2021-08-21T00:00:00Z","2021-07-27T00:00:00Z","2021-08-23T00:00:00Z","2021-10-13T00:00:00Z","2021-12-14T00:00:00Z","2021-09-23T00:00:00Z","2022-02-28T00:00:00Z","2020-07-15T00:00:00Z","2020-08-21T00:00:00Z","2020-10-09T00:00:00Z","2020-12-15T00:00:00Z","2020-12-15T00:00:00Z","2020-12-29T00:00:00Z","2019-12-16T00:00:00Z","2020-01-02T00:00:00Z","2020-01-20T00:00:00Z","2020-01-28T00:00:00Z","2020-02-14T00:00:00Z","2020-02-18T00:00:00Z","2020-03-06T00:00:00Z","2020-03-06T00:00:00Z","2020-03-27T00:00:00Z","2020-05-28T00:00:00Z","2020-06-09T00:00:00Z","2018-07-18T00:00:00Z","2018-07-30T00:00:00Z","2018-09-10T00:00:00Z","2018-10-30T00:00:00Z","2018-12-27T00:00:00Z","2019-01-24T00:00:00Z","2019-04-30T00:00:00Z","2019-05-20T00:00:00Z","2019-06-05T00:00:00Z","2019-06-28T00:00:00Z","2017-07-13T00:00:00Z","2017-08-18T00:00:00Z","2017-08-24T00:00:00Z","2017-09-08T00:00:00Z","2017-12-05T00:00:00Z","2018-04-05T00:00:00Z","2018-04-26T00:00:00Z",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"close_date_spc":[null,null,null,"2021-08-27T00:00:00Z",null,null,"2021-10-11T00:00:00Z","2021-12-15T00:00:00Z","2021-09-23T00:00:00Z","2022-02-14T00:00:00Z",null,"2020-08-14T00:00:00Z","2020-09-30T00:00:00Z",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"2022-07-26T00:00:00Z","2022-08-30T00:00:00Z","2022-09-29T00:00:00Z","2021-10-05T00:00:00Z","2021-12-09T00:00:00Z","2021-12-15T00:00:00Z","2022-01-28T00:00:00Z",null,"2021-10-13T00:00:00Z","2021-10-15T00:00:00Z","2021-10-19T00:00:00Z","2021-10-21T00:00:00Z","2021-10-25T00:00:00Z","2021-11-08T00:00:00Z","2021-12-15T00:00:00Z","2021-12-21T00:00:00Z","2022-01-05T00:00:00Z","2021-07-20T00:00:00Z","2021-07-30T00:00:00Z","2021-08-06T00:00:00Z","2021-08-10T00:00:00Z","2021-08-31T00:00:00Z","2021-08-31T00:00:00Z","2021-09-09T00:00:00Z","2021-09-10T00:00:00Z","2021-09-15T00:00:00Z","2022-06-17T00:00:00Z","2022-04-01T00:00:00Z","2022-02-22T00:00:00Z","2022-05-06T00:00:00Z","2022-07-01T00:00:00Z","2022-02-03T00:00:00Z","2022-02-22T00:00:00Z","2022-06-30T00:00:00Z","2022-04-18T00:00:00Z","2022-04-22T00:00:00Z","2022-05-16T00:00:00Z","2022-06-09T00:00:00Z",null,"2022-03-17T00:00:00Z","2022-03-23T00:00:00Z","2022-06-03T00:00:00Z","2022-06-10T00:00:00Z","2022-06-15T00:00:00Z",null,"2021-05-14T00:00:00Z","2021-05-10T00:00:00Z","2021-04-30T00:00:00Z","2021-04-09T00:00:00Z","2021-03-15T00:00:00Z","2021-03-10T00:00:00Z","2021-03-10T00:00:00Z","2021-03-05T00:00:00Z","2021-02-26T00:00:00Z","2021-02-26T00:00:00Z","2021-02-12T00:00:00Z","2021-01-15T00:00:00Z","2021-01-15T00:00:00Z","2021-01-14T00:00:00Z","2020-12-28T00:00:00Z","2020-12-10T00:00:00Z","2020-12-04T00:00:00Z","2020-11-30T00:00:00Z","2020-11-23T00:00:00Z","2020-11-02T00:00:00Z","2020-10-20T00:00:00Z","2020-10-09T00:00:00Z","2020-09-25T00:00:00Z","2020-08-07T00:00:00Z","2020-08-03T00:00:00Z","2020-07-17T00:00:00Z","2020-07-17T00:00:00Z","2020-07-01T00:00:00Z","2020-06-30T00:00:00Z","2020-05-29T00:00:00Z","2020-05-28T00:00:00Z","2020-05-18T00:00:00Z","2020-04-30T00:00:00Z","2020-04-15T00:00:00Z","2020-04-01T00:00:00Z","2020-03-31T00:00:00Z","2020-03-31T00:00:00Z","2020-03-30T00:00:00Z","2020-03-20T00:00:00Z","2020-02-27T00:00:00Z",null,null],"household_annual_income_dpl":[59600.08,58323.44,55016,35459.84,50430.04,48308.58,49463.2,59945.02,37222.95,85764,52434.46,44234.04,52919.98,31054.92,54754.18,27852.5,49860,40154,36088,54432,57008.12,56867,78622.96,40140,37017,58249.04,33280,15342.08,37865.19,37735,49500,38833.6,36691.2,67478.46,33280,39624,47840,27937,42176.33,37582.08,36068,40735,39595.44,35384,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"household_annual_income_spc":["NA","NA","NA",33234,"NA","NA",42000,64428,47544.6,82788,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",81556,62100,51648,34813,51000,51996,44199.96,30000,67488,40476.84,40428,76548,39377.04,57500.16,60493.92,40427.28,54095,52608,37206.48,29286.6,51612,63626.88,76173,69081.96,45688,76464,50876,53823,83403.84,51956.52,65419.8,55020,42996,82050,28080,65000.04,43525,67550.04,54080,"NA",56000,74448,40707.6,77160,49728,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"client_ami":[0.71,0.58,0.78,0.61,0.77,0.53,0.66,0.59,0.4,0.79,0.8,0.44,0.56,0.47,0.74,0.45,0.55,0.36,0.4,0.59,0.8,0.57,0.88,0.76,0.59,0.53,0.46,0.22,0.62,0.49,0.78,0.65,0.61,0.79,0.33,0.79,0.7,0.51,0.75,0.67,0.59,0.66,0.74,0.4,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"household_size_dpl":[2,6,1,2,1,4,2,5,4,6,1,5,2,1,4,1,4,7,4,5,1,6,4,1,1,7,2,2,2,3,2,1,1,4,6,1,2,2,1,1,2,2,1,6,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"household_size_spc":["NA","NA","NA",2,"NA","NA",2,5,4,6,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",3,1,4,1,1,3,1,3,5,1,1,4,5,3,6,3,3,2,1,3,4,1,5,2,5,4,2,5,4,2,1,2,2,4,1,3,4,1,4,3,2,4,4,3,1,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"number_of_applicants":[1,1,1,1,1,2,1,2,1,1,1,1,1,1,3,1,1,2,1,2,1,2,"NA",1,1,2,1,1,1,1,1,1,1,2,2,1,1,1,1,1,1,1,1,1,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"fthb":["Yes","Yes","yes","yes","yes","yes","yes","Yes","Yes","Yes","yes","yes","yes","yes","yes","yes","YES","YES","YES","YES","YES","YES","YES","YES","YES","YES","YES","Yes","Yes","Yes","Yes","Yes","Yes","YES","YES","Yes","YES","Yes","Yes","Yes","Yes","Yes","Yes","Yes",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"property_street_address":["4756 Clover Ridge Court","1002 Huntwood Lane","2949 Chinkapin Oak Lane","1893 Mt. Airy Rd.","4178 Dauphin Dr","312 Glade Ln","330 Glade Ln","801 Jefferson Dr.","30 Lafayette Dr.","4667 Briarwood Drive","76 Villa Circle","662 Locksley Terrace","1394 Timberwood Blvd","927 Charlton Avenue","412 Wynridge Drive","106 Alto Place","4738 Blue Jay Way","105 Pinewood Court","21 Rolling Hills Road","155 Georgetown Green","818 Nassau Street","814 Nassau Street","4750 Bluejay Way","28 Bolining Circle","320 Riverbend Drive, Apt. 3C","400 Riverside Avenue","42 Villa Circle","546A Cleveland Ave","980 Towne Lane","346 Charney Way","1031 Carrington Place","629 Deerfield Rd","2310 Finch Court","2265 Sparrow Lane","707 Prospect Avenue","86 Villa Circle","2213 Commonwealth Drive","50 Price Road","36 Woodlake Drive","2302 North Berkshire Rd Unit A","2049 Commonwealth Drive","819 Orangedale Ave","1769 Webland View Unit 5","737 Orangedale Ave",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"property_city":["Charlottesville","Charlottesville","Woodbridge","Louisa","Charlottesville","Charlottesville","Charlottesville","Palmyra","Palmyra","Charlottesville","Palmyra","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Ruckersville","Ruckersville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Palmyra","Charlottesville","Charlottesville","Palmyra","Charlottesville","Charlottesville","Palmyra","Charlottesville","Louisa","Charlottesville","Charlottesville","Charlottesville","Palmyra","Charlottesville","Louisa","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"property_state":["VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"property_zip":[22901,22901,22191,23093,22902,22901,22901,22963,22963,22911,22963,22903,22911,22901,22901,22903,22911,22968,22968,22902,22902,22902,22911,22963,22911,22902,22963,22903,22901,22963,22901,23093,22911,22911,22901,22963,22901,23903,22901,22901,22901,22903,22901,22903,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"sale_price_dpl":[285000,314000,332500,170000,243750,235000,243500,268000,278636,200000,172000,221170,264599,271900,260000,254900,200000,200000,183505,229900,215000,215000,257000,177514,163000,231000,166400,170000,189300,134000,233000,128000,181000,245000,155000,159900,186000,152944,174000,178700,156688,126000,181000,145000,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"sale_price_spc":["NA","NA","NA",170000,"NA","NA",243500,268000,278636,200000,"NA",221170,264599,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",190000,225000,202000,129000,267000,245000,240000,165000,334000,232000,219500,199797,219900,235000,227000,250000,262000,240000,260000,228600,235000,217380,263500,"NA",285000,289000,224000,289900,210000,265900,300000,266000,220000,247000,170000,293550,225000,205000,300000,269900,226000,249000,210000,265000,255000,270000,315000,130000,234000,250000,217000,244000,195500,200000,246170,208729,162500,174900,239859,195000,222000,254754,194900,208000,229000,253000,235000,194000,248200,152000,180000,245366,284000,218500,206000,28000,191500,173794,285000,202236,215000,157000,250000,120000,265000,223500,245000],"appraised_value":[287000,314000,"NA",173000,245000,235000,247000,270000,"NA","NA",172000,221170,264599,271900,260000,254900,250000,214000,203000,235000,225000,225000,257000,183000,163000,224000,168000,222000,190000,"NA",235000,138000,182000,245000,155000,160000,186000,165000,174000,180000,157000,127000,181000,145000,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"closing_costs_prepaids":[9059.79,17542.16,5197.18,9617.33,7991.75,6805.04,6447.74,8240.49,16450.95,11651.98,12542.1,7009.86,10887.87,5344.6,6906.37,6369.25,7382.83,7182.87,7530.73,11694.35,6380.97,"NA",9644.7,7585.98,5435.08,6038,2500,1250,7118.58,4501.71,7444.58,8422.31,6557.72,7855.49,31000,8035.41,6875,7642,6012.73,6001.9,4998.63,5149.36,7114.03,5754.78,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"lending_institution_dpl":["George Mason Mortgage","Fulton Mortgage","Bank of America","C&F Mortgage Corporation","Fulton Mortgage","Virginia Credit Union","C&F Mortgage Corporation","George Mason Mortgage","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Atlantic Bay Mortgage Group","Towne First Mortgage","Residential Home Services","Habitat for Humanity of Greater Charlottesville","Atlantic Coast Mortgage","Habitat for Humanity of Greater Charlottesville","Waterstone Mortgage Corporation","Towne First Mortgage","Waterstone Mortgage Corporation","George Mason Mortgage","Fulton Mortgage","Fulton Mortgage","Fulton Mortgage","George Mason Mortgage","Towne First Mortgage","TowneBank Mortgage","Fulton Mortgage","Habitat for Humanity of Greater Charlottesville","Towne First Mortgage","USDA","Atlantic Coast Mortgage","Atlantic Coast Mortgage","TowneBank Mortgage","George Mason Mortgage","Atlantic Coast Mortgage","NFM Lending","Atlantic Coast Mortgage","USDA","Towne First Mortgage","TowneBank Mortgage","Suntrust Mortgage","Atlantic Coast Mortgage","Movement Mortgage","Atlantic Coast Mortgage",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"lending_institution_spc":["Unknown",null,null,"Unknown",null,null,"C&F Mortgage Corporation","George Mason Mortgage","Unknown","Waterstone Mortgage Corporation",null,"Unknown","Unknown",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Movement Mortgage","Waterstone Mortgage Corporation","George Mason Mortgage","George Mason Mortgage","Novus Home Mortgage","Novus Home Mortgage","Novus Home Mortgage","Novus Home Mortgage","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Novus Home Mortgage","Atlantic Bay Mortgage Group","Atlantic Coast Mortgage","Atlantic Coast Mortgage","Atlantic Coast Mortgage","George Mason Mortgage","George Mason Mortgage","George Mason Mortgage","Movement Mortgage","Novus Home Mortgage","Novus Home Mortgage","Novus Home Mortgage","Novus Home Mortgage","Prosperity Home Mortgage","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Waterstone Mortgage Corporation","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown","Unknown"],"mortgage_product_dpl":["Conventional","Conventional","Conventional","FHA","Conventional","Conventional","Conventional","Conventional","FHA","502 Direct Loan","502 Direct Loan","VHDA","FHA","Habitat","Conventional","Habitat","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Conventional","Habitat","VHDA - Bond","502 Direct Loan","Conventional","VHDA - FHA","Other - Bond","Conventional","Conventional","FHA","Conventional","502 Direct Loan","VHDA - Bond","VHDA - Bond","Conventional","VHDA - CHRP","VHDA - FHA","VHDA - CHRP",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"mortgage_product_spc":["Unknown",null,null,"FHA",null,null,"Conventional","Conventional","FHA","502 Direct Loan",null,"Conventional","Conventional",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"FHA","FHA","Conventional","Conventional","502 Direct Loan","VA","502 Direct Loan","FHA","FHA","Conventional","VA","FHA","FHA","FHA","FHA","FHA","FHA","502 Direct Loan","FHA","FHA","FHA","Conventional","502 Direct Loan","FHA","FHA","FHA","FHA","Conventional","FHA","FHA","Unknown","Conventional","Conventional","502 Direct Loan","Conventional","FHA","FHA","502 Direct Loan","FHA","Conventional","Conventional","FHA","FHA","FHA","Conventional","FHA","502 Direct Loan","Conventional","FHA","FHA","FHA","Conventional","502 Direct Loan","FHA","Conventional","FHA","Conventional","FHA","FHA","FHA","FHA","Conventional","FHA","502 Direct Loan","Conventional","FHA","FHA","VA","Conventional","502 Direct Loan","502 Direct Loan","502 Direct Loan","FHA","FHA","Conventional","Unknown","Conventional","FHA","502 Direct Loan","502 Direct Loan","Conventional","FHA","FHA","502 Direct Loan","502 Direct Loan","FHA","FHA"],"mortgage_amount_dpl":[228000,244000,315875,160765,195000,188000,194800,241200,273588,200000,173737,176936,215383,170274,208000,118155,249300,180000,170653,187138,178000,181750,218450,159763,138550,200000,144768,170000,151440,134000,186400,117216,144800,196000,124000,146428,148800,125000,139200,142960,125351,100800,147500,116000,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"mortgage_amount_spc":["NA","NA","NA",161000,"NA","NA",194800,241200,268883.74,200000,"NA",176936,211679,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",183350,220924,161600,116100,267000,245000,240000,165000,322310,225044,224548,192804,212203,226775,219055,241250,252830,242424,250900,224600,230743,210859,263500,"NA",275025,279354,224000,231920,202650,256293,291000,239400,209000,247000,164900,293550,220924,205000,294566,261803,219220,240285,206196,255725,247350,265109,315000,105000,226190,250000,209405,236680,195500,196377,238785,216300,146250,174900,235513,188175,222000,247111,188078,208000,206100,244145,226775,194000,240754,152000,180000,245366,274060,214541,185400,282828,184797,177000,276450,204278,208550,154649,245471,121212,265000,223500,237650],"interest_rate_dpl":[0.04875,0.05875,0.02625,0.0225,0.035,0.02875,0.0275,0.0275,0.0175,0.0225,0.03625,0.025,0.02,0,0.03,0,0.0325,0.0325,0.02625,0.025,0.04375,0.04125,0.03875,0.0425,0.02875,0.03625,0.03375,0,0.04375,0.0375,0.04625,0.03875,0.04,0.0475,0.04625,0.05,0.03,0.0325,0.04375,0.04375,0.042,0.0375,0.04875,0.04375,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"interest_rate_spc":["NA","NA","NA",0.015,"NA","NA",0.0275,0.0275,0.0175,0.0225,"NA",0.035,0.0225,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",0.05,0.0475,0.05125,0.0225,0.0275,"NA","NA","NA",0.02375,0.02375,0.0275,0.025,0.0225,0.0225,0.02375,0.025,0.02625,0.0225,0.0175,0.0225,"NA",0.025,0.02125,0.02375,0.0275,0.02125,0.055,0.0475,0.04125,0.035,0.0375,0.03625,0.04,0.0475,0.05875,0.04625,"NA","NA","NA",0.04375,0.0425,0.06,0.04875,"NA",0.0425,0.02125,0.02,0.035,0.02,0.035,0.0125,0.025,0.015,0.01375,0.02125,0.0175,0.01875,0.0265,0.0175,0.02875,0.0175,0.03,"NA",0.0125,0.02875,0.0275,0.03125,0.0125,0.03625,"NA",0.0275,0.0375,"NA",0.0375,"NA",0.0375,"NA","NA",0.03,0.02875,0.0325,0.03,0.02875,0.02625,0.03625,0.03,0.015],"potential_interest_rate":["NA","NA","NA",0.025,"NA","NA",0.0375,0.0375,0.0275,0.0325,"NA",0.035,0.0225,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",0.06,0.0575,0.06125,0.0325,0.0375,"NA","NA","NA",0.03375,0.03375,0.0375,0.035,0.0325,0.0325,0.03375,0.035,0.03625,0.0325,0.0275,0.0325,"NA",0.035,0.03125,0.03375,0.0375,0.03125,0.045,0.0375,0.03125,0.045,0.0475,0.02625,0.03,0.0575,0.04875,0.03625,"NA","NA","NA",0.03375,0.0325,0.05,0.05875,0.0475,0.0325,0.03125,0.03,0.045,0.03,0.045,0.0225,0.035,0.025,0.01275,0.02125,0.0175,0.01875,0.0265,0.0175,0.0285,0.0175,0.03,"NA",0.0125,0.02875,0.0275,0.03125,0.0225,0.03625,"NA",0.0275,0.0375,"NA",0.0375,"NA",0.0375,"NA","NA",0.03,0.02875,0.0325,0.03,0.02875,0.02625,0.03625,0.04,0.025],"pha_loans_n":[2,3,0,1,2,2,2,1,0,0,1,2,2,2,2,1,1,1,1,2,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,1,1,1,2,2,1,2,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"pha_loans_amount":[53000,60500,0,17000,48750,47000,47625,26800,0,0,6293.98,44234,52919,13595,52000,12500,19100,20000,14680,45980,37000,33250,38550,17751,24450,24000,16640,10500,37860,6480.85,46600,14563.16,36200,49000,31000,15990,18100,10000,34800,35740,31338,25200,36200,29000,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"pha_loan_source":["ACHAP/ DHCD (albemarle county housing affordability programn)","ACHAP, PHA REGIONAL, CDFI","N/A","DHCD","ACHAP/ DHCD","ACHAP/ DHCD","ACHAP/ DHCD","DHCD","N/A","N/A","CDFI","DHCD and ACHAP","DHCD and ACHAP","City and PHA Regional","DHCD and ACHAP","PHA Regional Fund","ACHAP","CDFI","CDFI","ACHAP & CDFI","City HOME (DHCD home through Cville)","City HOME","Recycled HOME (DHCD \"recycled\" money bucket)","CDFI","DHCD HOME","City HOME","DHCD HOME","CAHF","DHCD HOME","Recycled Home","DHCD HOME Perf Pool","CDFI","DHCD HOME","DHCH HOME","CAHF","Recycled Home","CFDI and ACHAP","LCHAP","DHCD HOME","CAHF","DHCD HOME and Recycled HOME","CAHF and Recycled HOME","DHCD HOME","CAHF and Recycled HOME",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"dhcd":[1,0,0,1,1,1,1,1,0,0,0,1,1,0,1,0,0,0,0,0,1,0,1,0,1,0,1,0,1,0,1,0,1,0,0,0,0,0,1,0,1,0,1,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"achap":[1,1,0,0,1,1,1,0,0,0,0,1,1,0,1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"cdfi":[0,1,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"pha_regional":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"city":[0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,1,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"cahf":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,1,0,1,0,1,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"recycled_home":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,1,1,0,1,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"lchap":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"multiple_loans":[2,2,0,1,2,2,2,1,0,0,1,2,2,2,2,1,1,1,1,2,2,1,2,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,2,2,1,2,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"other_assistance":["SPARC & VIDA",null,"VIDA","SPARC",null,null,"SPARC","SPARC","SPARC & VIDA","VIDA & SPARC",null,null,"SPARC",null,null,null,null,null,"SPARC",null,null,null,null,null,null,null,null,"FHLB, City HOME, Habitat",null,"None","None","VHDA Grant",null,"NA","NA","NA","NA","VIDA","none","Fannie Mae CC ast","none","Seller Credit, SPARC","none","Friend Gift, SPARC",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"other_assistance_amount":[4000,"NA",4000,"NA","NA","NA","NA","NA",4000,4000,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA",75528,"NA","NA","NA",3200,"NA","NA","NA","NA","NA",4545,"NA",1500,"NA",3910.27,"NA",3878.41,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"client_street_address":["4287 Plank Road","2376 Abington Lane","14960 Potomac Heights Place, Apt. 214","304 Martinsville Avenue","224 Riverside Drive","2241 Commonwealth Drive, Apt. D","201-A Holly Drive","1222 Smith Street","1207-B Villa Lane","2382 Abington Drive","1446 Minor Ridge","426 Garrett Street, Apt. D","1914 Cedar Hill Road, Apt. A","927 Charlton Avenue","1255 Maple View Drive","408 Garrett Street","918-A South 1st Street","404 Roberston Avenue","166 Georgetown Road","2309 Peyton Drive, Apt. A","217-B Stribling Avenue","754 Prospect Avenue, Apt. C","675 Woodbrook Drive, Apt 102","84 Timber Road","2405 Peyton Drive, Apt. 204","400 Riverside Avenue","253 Colonade Drive, Apt. 21","546-A Cleveland Avenue","258 Colonnade Drive","2948 Mountain Hill Rd","2527 Hydraulic Road Apt 40","63 Robins Court","808 Orangedale Ave","2226 Commonwealth Drive Apt F","1229 Agnese Street","110 A Welk Place","2213 Commonwealth Drive","356 Zion Road","4081 Cypress Pointe Drive","140 Green Turtle Lane #1","1356 Villa Way Apt A","768 Prospect Ave #C","1614 Calvary Circle","1115 Forest Street Apt A",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"client_city":["North Garden","Charlottesville","Woodbridge","Gordonsville","Lynchburg","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Columbia","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Palmyra","Charlottesville","Palmyra","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Gordonsville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville","Charlottesville",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"client_state":["VA","VA","VA","VA","VA","VA","VA","vA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA","VA",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"client_zip":[22959,22911,22191,22942,24503,22901,22903,22901,22903,22911,22901,22902,22901,22902,22902,22902,22902,22903,22901,22901,22903,22903,22901,23038,22901,22902,22903,22903,22903,22963,22901,22963,22903,22901,22901,22903,22901,22942,22901,22901,22903,22903,22911,22903,"NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA","NA"],"ethnicity":["Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Hispanic","Not Hispanic","Not Hispanic","Chose not to respond","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Chose not to respond","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Not Hispanic","Hispanic","Not Hispanic","Not Hispanic",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"multirace":["Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Multiple","Single","Multiple","Single","Single","Single","Single","Multiple","Single","Single","Single","Multiple","Single","Multiple","Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Single","Multiple","Single","Single","Single","Single","Single",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"race":["White","White","Black","Black","White","Asian","Black","Black","Black","Black","Black","Asian","Other races","Black","Other races","Black","White","Asian","White","Black and White","White","Asian","Black","Black and White","White","Other races","Asian","White","White","Black","White","White","Black","White","White","Black","Black","Black","Black and White","White","White","White","White","White",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"income_ami_level":["50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","30 - 49% AMI","50 - 79% AMI","80 - 100% AMI","30 - 49% AMI","50 - 79% AMI","30 - 49% AMI","50 - 79% AMI","30 - 49% AMI","50 - 79% AMI","50 - 79% AMI","30 - 49% AMI",null,"50 - 79% AMI","30 - 49% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","30 - 49% AMI","30 - 49% AMI","< 30 % AMI","50 - 79% AMI","30 - 49% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","80 - 100% AMI","50 - 79% AMI","50 - 79% AMI","50 - 79% AMI","80 - 100% AMI","30 - 49% AMI",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"rural_area_status":["Rural","Rural","Not rural","Rural","Not rural","Not rural","Not rural","Not rural","Not rural","Not rural","Rural","Not rural","Not rural","Not rural","Rural","Not rural","Rural","Not rural","Not rural","Rural","Not rural","Not rural","Not rural","Rural","Not rural","Not rural","Not rural","Not rural","Not rural","Rural","Not rural","Rural","Not rural","Not rural","Not rural","Not rural","Rural","Rural","Not rural","Not rural","Rural","Not rural","Rural","Not rural",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"english_proficiency":["Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Not proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Not proficient","Proficient","Proficient","Proficient","Not proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Not proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Not proficient","Not proficient","Not proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient","Proficient",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"referral_source":["Friend","PHA Website",null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Friend",null,null,null,null,null,null,null,"Family",null,null,null,null,null,"Friend",null,null,"Friend",null,null,null,"Fluvanna Louisa Housing Foundation","Co-Worker","Co-Worker","Friend","Lender","PHA","International Rescue Committee",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"locality":[null,null,null,"Louisa",null,null,"Albemarle","Fluvanna","Fluvanna","Charlottesville",null,"Albemarle","Albemarle",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Fluvanna","Albemarle","Fluvanna","Albemarle","Louisa","Albemarle","Albemarle","Louisa","Albemarle","Albemarle","Albemarle","Fluvanna","Louisa","Albemarle","Nelson","Fluvanna","Louisa","Gordonsville","Louisa","Louisa","Fluvanna","Albemarle","Fluvanna","Charlottesville","Louisa","Greene","Fluvanna","Albemarle","Fluvanna","Greene","Albemarle","Greene","Albemarle","Louisa","Staunton","Louisa","Louisa","Fluvanna","Fluvanna","Albemarle","Louisa","Louisa","Fluvanna","Albemarle","Louisa","Louisa","Fluvanna","Fluvanna","Louisa","Albemarle","Louisa","Albemarle","Louisa","Louisa","Louisa","Fluvanna","Albemarle","Louisa","Louisa","Albemarle","Louisa","Louisa","Fluvanna","Louisa","Charlottesville","Louisa","Louisa","Fluvanna","Fluvanna","Albemarle","Albemarle","Louisa","Louisa","Louisa","Albemarle","Fluvanna","Albemarle","Fluvanna","Albemarle","Fluvanna","Albemarle","Greene","Louisa","Nelson","Louisa","Fluvanna","Fluvanna"],"mortgage_notes":[null,null,null,null,null,null,null,"Reduced mortgage insurance",null,null,null,"Reduced mortgage insurance","Reduced mortgage insurance",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Second Plus",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Reduced mortgage insurance",null,null,null,null,null,null,null,null,null,"Reduced mortgage insurance","No mortgage insurance",null,null,null,null,null,null,"Reduced mortgage insurance",null,null,null,null,null,null,null,"Reduced mortgage insurance",null,null,null,"Reduced mortgage insurance",null,null,"Reduced mortgage insurance",null,"Reduced mortgage insurance",null,null,null,null,"Reduced mortgage insurance",null,null,"Reduced mortgage insurance",null,null,null,"Reduced mortgage insurance",null,null,null,null,null,"Reduced mortgage insurance",null,"Reduced mortgage insurance",null,null,null,"Reduced mortgage insurance",null,null,null,null,null,null],"verified_close_date_in_gis":[null,null,null,null,null,null,"2021-10-13T00:00:00Z","2021-12-15T00:00:00Z",null,"2022-02-28T00:00:00Z",null,"2020-08-24T00:00:00Z","2020-10-13T00:00:00Z",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"2021-09-23T00:00:00Z","2021-12-07T00:00:00Z","2021-12-09T00:00:00Z","2022-01-28T00:00:00Z",null,"2021-10-19T00:00:00Z","2021-10-18T00:00:00Z","2021-10-26T00:00:00Z","2021-10-28T00:00:00Z","2021-10-25T00:00:00Z","2021-11-30T00:00:00Z","2022-01-25T00:00:00Z","2022-01-22T00:00:00Z","2022-01-07T00:00:00Z",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"2021-04-05T00:00:00Z","2021-03-10T00:00:00Z","2021-04-13T00:00:00Z","2021-02-15T00:00:00Z",null,null,"2021-01-21T00:00:00Z",null,"2021-03-10T00:00:00Z","2020-12-30T00:00:00Z",null,"2021-02-01T00:00:00Z","2020-12-15T00:00:00Z",null,"2020-11-04T00:00:00Z","2020-11-09T00:00:00Z","2021-03-10T00:00:00Z",null,"2020-07-31T00:00:00Z",null,"2020-07-31T00:00:00Z","2021-03-10T00:00:00Z","2021-03-10T00:00:00Z",null,"2020-10-02T00:00:00Z","2020-05-28T00:00:00Z","2020-05-18T00:00:00Z","2020-05-18T00:00:00Z","2020-04-10T00:00:00Z","2020-04-22T00:00:00Z","2020-03-31T00:00:00Z",null,null,null,"2021-03-10T00:00:00Z","2020-11-09T00:00:00Z",null],"received_cd":[null,null,null,"Yes",null,null,"Yes","Yes","Yes","Yes",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes",null,null,null,null,null,null,null,null,null,"Yes","Yes",null,null,null,null,null,null,"Yes","Yes","Yes","No","Yes",null,null,null,"Yes","Yes","Yes",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],"in_ors":[null,null,null,"Yes",null,null,"Yes","Yes","Yes","Yes",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,"Yes","Yes","Yes","Yes","No","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","Yes","No","No","No","No","No","No","No","No","No","Yes","Yes",null,null,null,null,null,null,"Yes","Yes",null,null,null,"Yes",null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null]},"columns":[{"id":"id_pha","name":"id_pha","type":"character","minWidth":150},{"id":"program","name":"program","type":"character","minWidth":150},{"id":"client_number","name":"client_number","type":"character","minWidth":150},{"id":"id_dpl","name":"id_dpl","type":"character","minWidth":150},{"id":"id_sparc","name":"id_sparc","type":"character","minWidth":150},{"id":"contract_date","name":"contract_date","type":"Date","minWidth":150},{"id":"close_date_dpl","name":"close_date_dpl","type":"Date","minWidth":150},{"id":"close_date_spc","name":"close_date_spc","type":"Date","minWidth":150},{"id":"household_annual_income_dpl","name":"household_annual_income_dpl","type":"numeric","minWidth":150},{"id":"household_annual_income_spc","name":"household_annual_income_spc","type":"numeric","minWidth":150},{"id":"client_ami","name":"client_ami","type":"numeric","minWidth":150},{"id":"household_size_dpl","name":"household_size_dpl","type":"numeric","minWidth":150},{"id":"household_size_spc","name":"household_size_spc","type":"numeric","minWidth":150},{"id":"number_of_applicants","name":"number_of_applicants","type":"numeric","minWidth":150},{"id":"fthb","name":"fthb","type":"character","minWidth":150},{"id":"property_street_address","name":"property_street_address","type":"character","minWidth":150},{"id":"property_city","name":"property_city","type":"character","minWidth":150},{"id":"property_state","name":"property_state","type":"character","minWidth":150},{"id":"property_zip","name":"property_zip","type":"numeric","minWidth":150},{"id":"sale_price_dpl","name":"sale_price_dpl","type":"numeric","minWidth":150},{"id":"sale_price_spc","name":"sale_price_spc","type":"numeric","minWidth":150},{"id":"appraised_value","name":"appraised_value","type":"numeric","minWidth":150},{"id":"closing_costs_prepaids","name":"closing_costs_prepaids","type":"numeric","minWidth":150},{"id":"lending_institution_dpl","name":"lending_institution_dpl","type":"character","minWidth":150},{"id":"lending_institution_spc","name":"lending_institution_spc","type":"character","minWidth":150},{"id":"mortgage_product_dpl","name":"mortgage_product_dpl","type":"character","minWidth":150},{"id":"mortgage_product_spc","name":"mortgage_product_spc","type":"character","minWidth":150},{"id":"mortgage_amount_dpl","name":"mortgage_amount_dpl","type":"numeric","minWidth":150},{"id":"mortgage_amount_spc","name":"mortgage_amount_spc","type":"numeric","minWidth":150},{"id":"interest_rate_dpl","name":"interest_rate_dpl","type":"numeric","minWidth":150},{"id":"interest_rate_spc","name":"interest_rate_spc","type":"numeric","minWidth":150},{"id":"potential_interest_rate","name":"potential_interest_rate","type":"numeric","minWidth":150},{"id":"pha_loans_n","name":"pha_loans_n","type":"numeric","minWidth":150},{"id":"pha_loans_amount","name":"pha_loans_amount","type":"numeric","minWidth":150},{"id":"pha_loan_source","name":"pha_loan_source","type":"character","minWidth":150},{"id":"dhcd","name":"dhcd","type":"numeric","minWidth":150},{"id":"achap","name":"achap","type":"numeric","minWidth":150},{"id":"cdfi","name":"cdfi","type":"numeric","minWidth":150},{"id":"pha_regional","name":"pha_regional","type":"numeric","minWidth":150},{"id":"city","name":"city","type":"numeric","minWidth":150},{"id":"cahf","name":"cahf","type":"numeric","minWidth":150},{"id":"recycled_home","name":"recycled_home","type":"numeric","minWidth":150},{"id":"lchap","name":"lchap","type":"numeric","minWidth":150},{"id":"multiple_loans","name":"multiple_loans","type":"numeric","minWidth":150},{"id":"other_assistance","name":"other_assistance","type":"character","minWidth":150},{"id":"other_assistance_amount","name":"other_assistance_amount","type":"numeric","minWidth":150},{"id":"client_street_address","name":"client_street_address","type":"character","minWidth":150},{"id":"client_city","name":"client_city","type":"character","minWidth":150},{"id":"client_state","name":"client_state","type":"character","minWidth":150},{"id":"client_zip","name":"client_zip","type":"numeric","minWidth":150},{"id":"ethnicity","name":"ethnicity","type":"character","minWidth":150},{"id":"multirace","name":"multirace","type":"character","minWidth":150},{"id":"race","name":"race","type":"character","minWidth":150},{"id":"income_ami_level","name":"income_ami_level","type":"character","minWidth":150},{"id":"rural_area_status","name":"rural_area_status","type":"character","minWidth":150},{"id":"english_proficiency","name":"english_proficiency","type":"character","minWidth":150},{"id":"referral_source","name":"referral_source","type":"character","minWidth":150},{"id":"locality","name":"locality","type":"character","minWidth":150},{"id":"mortgage_notes","name":"mortgage_notes","type":"character","minWidth":150},{"id":"verified_close_date_in_gis","name":"verified_close_date_in_gis","type":"Date","minWidth":150},{"id":"received_cd","name":"received_cd","type":"character","minWidth":150},{"id":"in_ors","name":"in_ors","type":"character","minWidth":150}],"defaultPageSize":5,"striped":true,"compact":true,"nowrap":true,"dataKey":"3f461564852fb2ddf71a746e24d62ee7"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
<p>Where there were duplicate fields from each dataset, the <code>_dpl</code> and <code>_spc</code> suffixes were added to the end of column names, respective to their source. For example, the close date data from the DPL records are retained as the <code>close_date_dpl</code> column, while the close dates from the SPARC data are <code>close_date_spc</code>.</p>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Data integrity issues
</div>
</div>
<div class="callout-body-container callout-body">
<p>Both the DPL and SPARC datasets were found to have data integrity issues that PHA should resolve in the future.</p>
<ul>
<li><p>Mortgage product fields included both “RHS” (Rural Housing Service), “USDA”, and “502” values. For now, these are all assumed to be “502 Direct Loans”.</p></li>
<li><p>Overlapping fields from the DPL and SPARC datasets do not always reconcile for the clients who used both programs. For example, the specific close dates and household income values are often slightly different—but should, in theory, be identical.</p></li>
<li><p>The SPARC client records are missing many values in the closing date, interest rate, household income, household size, and lender columns.</p></li>
<li><p>Some DPL clients were noted as receiving SPARC in the <code>other_assistance</code> column. However, two of clients were <em>not</em> found in the SPARC data.</p></li>
</ul>
</div>
</div>
</section>
<section id="regional-and-neighborhood-profiles" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="regional-and-neighborhood-profiles"><span class="header-section-number">2.2</span> Regional and neighborhood profiles</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Why this is needed
</div>
</div>
<div class="callout-body-container callout-body">
<p>Demographic and socioeconomic data will help establish the baseline characteristics of population groups that PHA seeks to compare with its clients. For example, how closely does the client pool match the average racial and ethnic makeup across the region?</p>
</div>
</div>
<p>Two datasets will be used to create summary profiles of the geographies PHA will use as reference for its clients’ characteristics. Both are from the U.S. Census Bureau:</p>
<ul>
<li>2020 Decennial Census</li>
<li>American Community Survey (5-year estimates)</li>
</ul>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>As of January 2023, the latest ACS data available are the 2017-2021 5-year estimates.</p>
</div>
</div>
<p>The fields to collect from this data include:</p>
<ul>
<li>Race and ethnicity of population</li>
<li>Average household incomes</li>
<li>Homeownership rates</li>
</ul>
<p><strong>Step 1: Race and ethnicity data from 2020 Census</strong></p>
<div class="cell">
<details>
<summary>Import data</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Get variables for 2020 Census PL-94171 Redistricting dataset</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>pl_vars <span class="ot">&lt;-</span> <span class="fu">load_variables</span>(<span class="dv">2020</span>, <span class="st">"pl"</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Find and select race and ethnicity variables</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>race_vars <span class="ot">&lt;-</span> pl_vars <span class="sc">|&gt;</span> </span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(name <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_003N"</span>, <span class="co"># White</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_004N"</span>, <span class="co"># Black</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_005N"</span>, <span class="co"># American Indian and Alaska Native</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_006N"</span>, <span class="co"># Asian</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_007N"</span>, <span class="co"># Native Hawaiian and Other Pacific Islander</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_008N"</span>, <span class="co"># Some other race</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P1_009N"</span>, <span class="co"># Two or more races</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P2_002N"</span>, <span class="co"># Total Hispanic or Latino</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">"P2_003N"</span>  <span class="co"># Total not Hispanic or Latino</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Rename race and ethnicity groups </span></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">label =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_003N"</span> <span class="sc">~</span> <span class="st">"White"</span>,</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_004N"</span> <span class="sc">~</span> <span class="st">"Black"</span>,</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_005N"</span> <span class="sc">~</span> <span class="st">"Another race"</span>,</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_006N"</span> <span class="sc">~</span> <span class="st">"Asian"</span>,</span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_007N"</span> <span class="sc">~</span> <span class="st">"Another race"</span>,</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_008N"</span> <span class="sc">~</span> <span class="st">"Another race"</span>,</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P1_009N"</span> <span class="sc">~</span> <span class="st">"Multiracial"</span>,</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P2_002N"</span> <span class="sc">~</span> <span class="st">"Hispanic or Latino"</span>,</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a>    name <span class="sc">==</span> <span class="st">"P2_003N"</span> <span class="sc">~</span> <span class="st">"Not Hispanic or Latino"</span>,</span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">|&gt;</span> </span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add race/ethnicity label</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">category =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>      <span class="fu">str_detect</span>(name, <span class="st">"P1"</span>) <span class="sc">~</span> <span class="st">"Race"</span>,</span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Ethnicity"</span>),</span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">.after =</span> <span class="dv">1</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span> </span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Drop concept column (unneeded)</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>concept)</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a><span class="co"># Import 2020 Census race and ethnicity data for Charlottesville City</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>cv_race_raw <span class="ot">&lt;-</span> <span class="fu">get_decennial</span>(</span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">geography =</span> <span class="st">"county"</span>,</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">variables =</span> race_vars<span class="sc">$</span>name,</span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2020</span>,</span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="at">sumfile =</span> <span class="st">"pl"</span>,</span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">"VA"</span>,</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>  <span class="at">county =</span> <span class="st">"Charlottesville city"</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Prep data</summary>
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Join race and ethnicity labels</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>cv_race <span class="ot">&lt;-</span> cv_race_raw <span class="sc">|&gt;</span> </span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">left_join</span>(race_vars, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"variable"</span> <span class="ot">=</span> <span class="st">"name"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Sum "Another race" values into one row</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category, label) <span class="sc">|&gt;</span> </span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">value =</span> <span class="fu">sum</span>(value)) <span class="sc">|&gt;</span> </span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add percent column</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(category) <span class="sc">|&gt;</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> value<span class="sc">/</span><span class="fu">sum</span>(value)) <span class="sc">|&gt;</span> </span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Generate table</span></span>
<span id="cb8-18"><a href="#cb8-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-19"><a href="#cb8-19" aria-hidden="true" tabindex="-1"></a>cv_race <span class="sc">|&gt;</span> </span>
<span id="cb8-20"><a href="#cb8-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(value), <span class="at">.by_group =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb8-21"><a href="#cb8-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>() <span class="sc">|&gt;</span> </span>
<span id="cb8-22"><a href="#cb8-22" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_styling</span>(</span>
<span id="cb8-23"><a href="#cb8-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">bootstrap_options =</span> <span class="fu">c</span>(<span class="st">"striped"</span>, <span class="st">"hover"</span>, <span class="st">"condensed"</span>, <span class="st">"responsive"</span>)</span>
<span id="cb8-24"><a href="#cb8-24" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">

<table class="table table-striped table-hover table-condensed table-responsive" style="margin-left: auto; margin-right: auto;">
 <thead>
  <tr>
   <th style="text-align:left;"> category </th>
   <th style="text-align:left;"> label </th>
   <th style="text-align:right;"> value </th>
   <th style="text-align:right;"> pct </th>
  </tr>
 </thead>
<tbody>
  <tr>
   <td style="text-align:left;"> Ethnicity </td>
   <td style="text-align:left;"> Not Hispanic or Latino </td>
   <td style="text-align:right;"> 43346 </td>
   <td style="text-align:right;"> 0.9311108 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Race </td>
   <td style="text-align:left;"> White </td>
   <td style="text-align:right;"> 30344 </td>
   <td style="text-align:right;"> 0.6518162 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Race </td>
   <td style="text-align:left;"> Black </td>
   <td style="text-align:right;"> 7122 </td>
   <td style="text-align:right;"> 0.1529869 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Race </td>
   <td style="text-align:left;"> Asian </td>
   <td style="text-align:right;"> 4083 </td>
   <td style="text-align:right;"> 0.0877065 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Race </td>
   <td style="text-align:left;"> Multiracial </td>
   <td style="text-align:right;"> 3583 </td>
   <td style="text-align:right;"> 0.0769660 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Ethnicity </td>
   <td style="text-align:left;"> Hispanic or Latino </td>
   <td style="text-align:right;"> 3207 </td>
   <td style="text-align:right;"> 0.0688892 </td>
  </tr>
  <tr>
   <td style="text-align:left;"> Race </td>
   <td style="text-align:left;"> Another race </td>
   <td style="text-align:right;"> 1421 </td>
   <td style="text-align:right;"> 0.0305243 </td>
  </tr>
</tbody>
</table>

</div>
</div>
<p><strong>Step 2: Household income data from ACS</strong></p>
<div class="cell">
<details>
<summary>Import data</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tbd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Prep data</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tbd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p><strong>Step 3: Homeownership data from ACS</strong></p>
<div class="cell">
<details>
<summary>Import data</summary>
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tbd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details>
<summary>Prep data</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># tbd</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="mortgage-applications-and-activity" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="mortgage-applications-and-activity"><span class="header-section-number">2.3</span> Mortgage applications and activity</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Why this is needed
</div>
</div>
<div class="callout-body-container callout-body">
<p>Along with comparing client characteristics with the region or a neighborhood as a whole, we can compare their mortgages to overall lending activity in the community over time. This will allow PHA to benchmark its buyer assistance efforts to home loan trends across the region.</p>
</div>
</div>
<p>This information is available from the Home Mortgage Disclosure Act (HMDA) data from the Consumer Financial Protection Bureau. HMDA data include loan-level information on buyer demographics, loan attributes, and property characteristics. Entries for buyers whose applications were eventually withdrawn or denied are also included.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>As of January 2023, the latest HMDA data available is for 2021.</p>
</div>
</div>
<p>The fields to collect from this data include:</p>
<ul>
<li>Buyer race and ethnicity</li>
<li>Buyer county and census tract</li>
<li>Loan type (conventional, FHA, VA, or USDA)</li>
<li>Action taken (loan originated, application denied or withdrawn)</li>
<li>Loan amount</li>
<li>Interest rate</li>
<li>Property value</li>
<li>Occupancy type (principal residence only)</li>
<li>Buyer gross annual income</li>
<li>Debt-to-income ratio</li>
</ul>
<p><code>Add steps on cleaning/preparing this data</code></p>
</section>
<section id="home-values" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="home-values"><span class="header-section-number">2.4</span> Home values</h2>
<div class="callout-tip callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Why this is needed
</div>
</div>
<div class="callout-body-container callout-body">
<p>Detailed data on home sales and values are necessary to make estimates about the total home equity gained (or lost) by PHA buyers and other homeowners in the community. This property-level data will help PHA assess its programs’ abilities to support wealth-building among clients.</p>
</div>
</div>
<section id="real-estate-assessments" class="level3" data-number="2.4.1">
<h3 data-number="2.4.1" class="anchored" data-anchor-id="real-estate-assessments"><span class="header-section-number">2.4.1</span> Real estate assessments</h3>
<p>Localities in PHA’s service area regularly assess property values to calculate the total real estate taxes to be paid by each property owner. Properties are reassessed to better match taxable values with potential market values, which can change significantly over time.</p>
<p>Despite these updates, local assessments can often lag behind current market trends, so they are not the most accurate indicator of the actual market value of a home if it were sold. Still, assessment data are consistent and publicly available for all parcels in a locality. This creates a useful longitudinal dataset.</p>
<p>For this preliminary analysis, only assessment data from the City of Charlottesville will be used.</p>
<p>The fields to collect from this data include:</p>
<ul>
<li>Parcel number</li>
<li>Street number and name</li>
<li>Bedrooms and bathrooms</li>
<li>Finished square footage</li>
<li>Total assessed value</li>
</ul>
<p><code>Add steps on cleaning/preparing this data</code></p>
</section>
<section id="mls-sales" class="level3" data-number="2.4.2">
<h3 data-number="2.4.2" class="anchored" data-anchor-id="mls-sales"><span class="header-section-number">2.4.2</span> MLS sales</h3>
<p>Actual recorded home sales are the most accurate way to determine residential property values. For arms-length transactions, sales prices reflect the actual market value of each home. These records are therefore the ideal source to best determine home equity changes among homeowners.</p>
<p>PHA is able to provide data exported from the multiple listing service (MLS) operated by the Charlottesville Area Association of REALTORS® (CAAR). The MLS platform includes all real estate listings from agents in the region and is dynamically updated as listings are added, updated, or closed.</p>
<p>For this preliminary analysis, PHA has provided data on all sold single-family homes in the City of Charlottesville from September 2022 through November 22, 2022.</p>
<p>Fields included in this exports include:</p>
<ul>
<li>Property address</li>
<li>Days on market</li>
<li>List price</li>
<li>Closed date</li>
<li>Bedrooms and bathrooms</li>
<li>Finished square footage</li>
</ul>
<p><code>Add steps on cleaning/preparing this data</code></p>
</section>
</section>
<section id="other-data" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="other-data"><span class="header-section-number">2.5</span> Other data</h2>
<p><code>May or may not eventually be used</code></p>
<ul>
<li>Neighborhood boundaries from City of Charlottesville (<a href="https://opendata.charlottesville.org/datasets/charlottesville::planning-neighborhood-area/about">link</a>)</li>
<li>Real estate sales (<a href="https://opendata.charlottesville.org/maps/real-estate-sales">link</a>)</li>
</ul>
</section>
</section>
<section id="analysis" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Analysis</h1>
<section id="clients-served-by-program" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="clients-served-by-program"><span class="header-section-number">3.1</span> Clients served by program</h2>
<p>From July 2017 through September 2022, PHA served a total of 131 households with its DPL and SPARC programs.</p>
<div class="cell">
<details>
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Cumulative total served by program</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>clients_total <span class="ot">&lt;-</span> clients_all <span class="sc">|&gt;</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(program, close_date_dpl, close_date_spc) <span class="sc">|&gt;</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Collapse close dates into one column</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Assume DPL close date is correct when SPARC date differs</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">close_date =</span> <span class="fu">case_when</span>(</span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>    <span class="sc">!</span><span class="fu">is.na</span>(close_date_dpl) <span class="sc">~</span> close_date_dpl,</span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> close_date_spc</span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise clients by month</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a>clients_cum <span class="ot">&lt;-</span> clients_total <span class="sc">|&gt;</span> </span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(close_date) <span class="sc">|&gt;</span>     </span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(program, <span class="at">month =</span> <span class="fu">floor_date</span>(close_date, <span class="st">"month"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(program, month, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Cumulative sum by program</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(program) <span class="sc">|&gt;</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">cum_sum =</span> <span class="fu">cumsum</span>(n))</span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(clients_cum, <span class="fu">aes</span>(<span class="at">x =</span> month, <span class="at">y =</span> cum_sum, <span class="at">fill =</span> program)) <span class="sc">+</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>() <span class="sc">+</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">50</span>,<span class="dv">75</span>,<span class="dv">100</span>,<span class="dv">125</span>)) <span class="sc">+</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_hda</span>() <span class="sc">+</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Cumulative total of clients served by program"</span>,</span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Data from July 2017 through September 2022"</span>,</span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"**Note:** Four records without close dates are omitted."</span>) <span class="sc">+</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_hda</span>(<span class="at">base_size =</span> <span class="dv">22</span>) <span class="sc">+</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_zero_line</span>(<span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span></span>
<span id="cb13-40"><a href="#cb13-40" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="piedmont_files/figure-html/cumulative-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>PHA served DPL-only clients from 2017 through 2019, averaging fewer than ten annually. In 2020, PHA began offering SPARC, which has been used by more than 25 clients annually since. Several clients have used both DPL and SPARC assistance each year since 2020.</p>
<div class="cell">
<details>
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise data by program and year</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>clients_annual <span class="ot">&lt;-</span> clients_total <span class="sc">|&gt;</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(close_date) <span class="sc">|&gt;</span>     </span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(program, <span class="at">year =</span> <span class="fu">floor_date</span>(close_date, <span class="st">"year"</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">complete</span>(program, year, <span class="at">fill =</span> <span class="fu">list</span>(<span class="at">n =</span> <span class="dv">0</span>)) <span class="sc">|&gt;</span> </span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">year =</span> <span class="fu">format</span>(year, <span class="st">"%Y"</span>))</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(clients_annual, <span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> n, <span class="at">fill =</span> program)) <span class="sc">+</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_hda</span>() <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Annual number of clients served by program"</span>,</span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Data from July 2017 through September 2022"</span>,</span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a>       <span class="at">caption =</span> <span class="st">"**Note:** Four records without close dates are omitted."</span>) <span class="sc">+</span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_hda</span>(<span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_zero_line</span>(<span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="piedmont_files/figure-html/annual-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>In total, two-thirds (66 percent) of all clients used SPARC only. About one quarter (27 percent) used DPL only, and just eight clients (6 percent) took advantage of both.</p>
<div class="cell">
<details>
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise data by program</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>clients_program <span class="ot">&lt;-</span> clients_total <span class="sc">|&gt;</span>     </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(program)</span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create plot</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(clients_program, <span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">reorder</span>(program, n), <span class="at">x =</span> n, <span class="at">fill =</span> program, <span class="at">label =</span> n)) <span class="sc">+</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_text</span>(<span class="at">hjust =</span> <span class="dv">2</span>,</span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a>            <span class="at">color =</span> <span class="st">"white"</span>,</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a>            <span class="at">size =</span> <span class="dv">10</span>) <span class="sc">+</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_hda</span>() <span class="sc">+</span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Total number of clients served by program"</span>,</span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a>       <span class="at">subtitle =</span> <span class="st">"Data from July 2017 through September 2022"</span>) <span class="sc">+</span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_hda</span>(<span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">add_zero_line</span>(<span class="st">"x"</span>) <span class="sc">+</span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">flip_gridlines</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="piedmont_files/figure-html/totals-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
<section id="profile-of-clients" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="profile-of-clients"><span class="header-section-number">3.2</span> Profile of clients</h2>
<p>Race and ethnicity data is only available for clients who used the DPL program.</p>
<div class="cell">
<details>
<summary>View code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Summarise clients by race</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>clients_race <span class="ot">&lt;-</span> clients_all <span class="sc">|&gt;</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(race) <span class="sc">|&gt;</span> </span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add percent column</span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add source and category columns</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"Clients"</span>,</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>         <span class="at">category =</span> <span class="st">"Race"</span>,</span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update race labels and column names to match ACS data</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">race =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>    race <span class="sc">==</span> <span class="st">"Black and White"</span> <span class="sc">~</span> <span class="st">"Multiracial"</span>,</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a>    race <span class="sc">==</span> <span class="st">"Other races"</span> <span class="sc">~</span> <span class="st">"Another race"</span>,</span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> race)) <span class="sc">|&gt;</span> </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">label =</span> race,</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a>         <span class="at">value =</span> n)</span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as above for ethnicity</span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>clients_ethnicity <span class="ot">&lt;-</span> clients_all <span class="sc">|&gt;</span> </span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">count</span>(ethnicity) <span class="sc">|&gt;</span> </span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span></span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> </span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add percent column</span></span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pct =</span> n<span class="sc">/</span><span class="fu">sum</span>(n)) <span class="sc">|&gt;</span> </span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Add source and category columns</span></span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"Clients"</span>,</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>         <span class="at">category =</span> <span class="st">"Ethnicity"</span>,</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>         <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Update race labels and column names to match ACS data</span></span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ethnicity =</span> <span class="fu">case_when</span>(</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>    ethnicity <span class="sc">==</span> <span class="st">"Hispanic"</span> <span class="sc">~</span> <span class="st">"Hispanic or Latino"</span>,</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>    ethnicity <span class="sc">==</span> <span class="st">"Not Hispanic"</span> <span class="sc">~</span> <span class="st">"Not Hispanic or Latino"</span>,</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a>    <span class="cn">TRUE</span> <span class="sc">~</span> ethnicity)) <span class="sc">|&gt;</span> </span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">label =</span> ethnicity,</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a>         <span class="at">value =</span> n)</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a><span class="co"># Add client data to ACS data</span></span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a>race_join <span class="ot">&lt;-</span> cv_race <span class="sc">|&gt;</span> </span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">source =</span> <span class="st">"Charlottesville"</span>, <span class="at">.before =</span> <span class="dv">1</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(clients_race, clients_ethnicity)</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a>race_plot <span class="ot">&lt;-</span> race_join <span class="sc">|&gt;</span> </span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category <span class="sc">==</span> <span class="st">"Race"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pct, <span class="at">y =</span> source, <span class="at">fill =</span> <span class="fu">reorder</span>(label, pct), <span class="at">alpha =</span> source)) <span class="sc">+</span></span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_hda</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Client race and ethnicity compared to Charlottesville"</span>,</span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a>         <span class="at">subtitle =</span> <span class="st">"Includes only DPL clients"</span>,</span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a>         <span class="at">fill =</span> <span class="st">"Race"</span>) <span class="sc">+</span></span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_hda</span>(<span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">flip_gridlines</span>() <span class="sc">+</span></span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"left"</span>,</span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a>ethnicity_plot <span class="ot">&lt;-</span> race_join <span class="sc">|&gt;</span> </span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(category <span class="sc">==</span> <span class="st">"Ethnicity"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> pct, <span class="at">y =</span> source, <span class="at">fill =</span> <span class="fu">reorder</span>(label, pct), <span class="at">alpha =</span> source)) <span class="sc">+</span></span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_fill_hda</span>(<span class="sc">-</span><span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.6</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a>    <span class="fu">scale_x_continuous</span>(<span class="at">labels =</span> <span class="fu">label_percent</span>()) <span class="sc">+</span></span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a>    <span class="fu">guides</span>(<span class="at">fill =</span> <span class="fu">guide_legend</span>(<span class="at">reverse =</span> <span class="cn">TRUE</span>),</span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">fill =</span> <span class="st">"Ethnicity"</span>,</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>         <span class="at">caption =</span> <span class="st">"**Source:** U.S. Census Bureau, 2020 Decennial Census P.L. 94-171 Redistricting Data."</span>) <span class="sc">+</span></span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_hda</span>(<span class="at">base_size =</span> <span class="dv">20</span>) <span class="sc">+</span></span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a>    <span class="fu">flip_gridlines</span>() <span class="sc">+</span></span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(</span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.position =</span> <span class="st">"left"</span>,</span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a>      <span class="at">legend.title =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>)</span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a>race_plot <span class="sc">+</span> ethnicity_plot <span class="sc">+</span></span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot_layout</span>(<span class="at">ncol =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<p><img src="piedmont_files/figure-html/race-ethnicity-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Race and ethnicity</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Income</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Demographic/socioeconomic comparison to region/neighborhood</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="assistance-levels" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="assistance-levels"><span class="header-section-number">3.3</span> Assistance levels</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Number and distribution of DPL sources</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Amount of non-DPL assistance</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Breakdown by race, ethnicity, and income</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="spatial-patterns" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="spatial-patterns"><span class="header-section-number">3.4</span> Spatial patterns</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Locations of prior client home</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Locations of home purchased by client</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="housing-outcomes" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="housing-outcomes"><span class="header-section-number">3.5</span> Housing outcomes</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Client home attributes and price compared to neighborhood</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"># Client loan products compared to region (and neighborhood, if possible)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
<section id="home-equity" class="level2" data-number="3.6">
<h2 data-number="3.6" class="anchored" data-anchor-id="home-equity"><span class="header-section-number">3.6</span> Home equity</h2>
<div class="cell">
<details>
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Two methods to try and test</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1:</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Find average percent change in assessment values from purchase date to current for all comparable homes in neighborhood</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Apply percent change to original sales price for estimated home value</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate remaining mortgage balance using loan info</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a><span class="co"># value - balance = equity</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2:</span></span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Same as above but use MLS sales data</span></span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Will have much smaller sample size -- may only be possible at city level</span></span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Determine if any past clients have already sold home -- would provide most accurate estimate</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section>
</section>
<section id="takeaways" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Takeaways</h1>
<p><code>Major (and other noteworthy) findings from analysis</code></p>
</section>
<section id="next-steps" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> Next steps</h1>
<p>HDAdvisors will continue to work with PHA on the following next steps:</p>
<ul>
<li>Develop consistent data entry/collection procedures to reduce time needed for data cleaning/correction in future analysis.</li>
<li>Collect and analyze program application data for clients who did not receive assistance from DPL and/or SPARC. Assess, if possible, reasons for denial and compare with loan denial trends in HMDA data.</li>
</ul>
<p><code>Plenty more to add here</code></p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>